# calculator-zverev-ds
# –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–∏—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏–π

–ü—Ä–æ–≥—Ä–∞–º–º–∞ –Ω–∞ —è–∑—ã–∫–µ C –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–∏—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏–π —Å —Ü–µ–ª—ã–º–∏ —á–∏—Å–ª–∞–º–∏, –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏ `+`, `-`, `*`, `/` –∏ —Å–∫–æ–±–∫–∞–º–∏. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –∞–ª–≥–æ—Ä–∏—Ç–º **Shunting Yard** –¥–ª—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –≤ –ø–æ—Å—Ç—Ñ–∏–∫—Å–Ω—É—é –∑–∞–ø–∏—Å—å –∏ –ø–æ—Å–ª–µ–¥—É—é—â–µ–≥–æ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è.

## üìã –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏: `+`, `-`, `*`, `/`.
- –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–∫–æ–±–æ–∫ `()` –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ –æ–ø–µ—Ä–∞—Ü–∏–π.
- –†–∞–±–æ—Ç–∞ —Å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º–∏ —á–∏—Å–ª–∞–º–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `-3`, `5 * (-2 + 4)`).
- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç—å—é –¥–ª—è –≤–≤–æ–¥–∞ –∏ —Ç–æ–∫–µ–Ω–æ–≤.
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –¥–µ–ª–µ–Ω–∏–µ –Ω–∞ –Ω–æ–ª—å –∏ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è.
- –°—á–∏—Ç—ã–≤–∞–µ—Ç –¥–æ `EOF`

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫
1. **–°–∫–æ–º–ø–∏–ª–∏—Ä—É–π—Ç–µ –ø—Ä–æ–≥—Ä–∞–º–º—É**:
   ```bash
   gcc  main.c -o calculator.exe
   
2. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ–≥—Ä–∞–º–º—É**:
   ```bash
   ./calculator.exe
   
3. **–í–≤–µ–¥–∏—Ç–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ**:
   - –í–≤–µ–¥–∏—Ç–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –∏ –Ω–∞–∂–º–∏—Ç–µ `Ctrl+D`  –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤–≤–æ–¥–∞.
   - –ü—Ä–∏–º–µ—Ä: `(5 - 3) * 4 + 10 / 2`

4. **–†–µ–∑—É–ª—å—Ç–∞—Ç**:
   - –ü—Ä–æ–≥—Ä–∞–º–º–∞ –≤—ã–≤–µ–¥–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∏–ª–∏ `0` –ø—Ä–∏ –æ—à–∏–±–∫–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–µ–ª–µ–Ω–∏–µ –Ω–∞ –Ω–æ–ª—å).

## üìö –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- –ö–æ–º–ø–∏–ª—è—Ç–æ—Ä C (–Ω–∞–ø—Ä–∏–º–µ—Ä, `gcc` –∏–ª–∏ `clang`).
- –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏: `<stdio.h>`, `<stdlib.h>`, `<string.h>

## üîß –î–µ—Ç–∞–ª–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –°—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö
- **–°—Ç–µ–∫ (`Stack`)**:
  - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞–º–∏ –ø—Ä–∏ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–∏ –≤ –ø–æ—Å—Ç—Ñ–∏–∫—Å–Ω—É—é —Ñ–æ—Ä–º—É.
  - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –∏–∑ –ø–æ—Å—Ç—Ñ–∏–∫—Å–Ω–æ–π –∑–∞–ø–∏—Å–∏.
- **–û—á–µ—Ä–µ–¥—å (`Queue`)**:
  - –•—Ä–∞–Ω–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤ –≤—ã—Ä–∞–∂–µ–Ω–∏—è –Ω–∞ —ç—Ç–∞–ø–∞—Ö –ø–∞—Ä—Å–∏–Ω–≥–∞ –∏ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è.

### –ê–ª–≥–æ—Ä–∏—Ç–º Shunting Yard

```C

while (–µ—Å—Ç—å —Ç–æ–∫–µ–Ω—ã) {
  if (—Ç–æ–∫–µ–Ω ‚Äî —á–∏—Å–ª–æ) ‚Üí –¥–æ–±–∞–≤–∏—Ç—å –≤ –≤—ã—Ö–æ–¥–Ω—É—é –æ—á–µ—Ä–µ–¥—å;
  else if (—Ç–æ–∫–µ–Ω ‚Äî –æ–ø–µ—Ä–∞—Ç–æ—Ä) {
    while (–≤–µ—Ä—Ö —Å—Ç–µ–∫–∞ ‚Äî –æ–ø–µ—Ä–∞—Ç–æ—Ä —Å >= –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º) {
      –≤—ã—Ç–æ–ª–∫–Ω—É—Ç—å –æ–ø–µ—Ä–∞—Ç–æ—Ä –∏–∑ —Å—Ç–µ–∫–∞ –≤ –≤—ã—Ö–æ–¥–Ω—É—é –æ—á–µ—Ä–µ–¥—å;
    }
    –¥–æ–±–∞–≤–∏—Ç—å —Ç–æ–∫–µ–Ω –≤ —Å—Ç–µ–∫;
  }
  else if (—Ç–æ–∫–µ–Ω ‚Äî '(') ‚Üí –¥–æ–±–∞–≤–∏—Ç—å –≤ —Å—Ç–µ–∫;
  else if (—Ç–æ–∫–µ–Ω ‚Äî ')') {
    –≤—ã—Ç–æ–ª–∫–Ω—É—Ç—å –≤—Å–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã –∏–∑ —Å—Ç–µ–∫–∞ –¥–æ '(';
    —É–¥–∞–ª–∏—Ç—å '(' –∏–∑ —Å—Ç–µ–∫–∞;
  }
}

###  –í—ã—á–∏—Å–ª–µ–Ω–∏–µ –ø–æ—Å—Ç—Ñ–∏–∫—Å–Ω–æ–π –∑–∞–ø–∏—Å–∏

```C

int calculate(Queue* postfix) {
  Stack stack;
  init(&stack);

  while (postfix->size > 0) {
    char* token = popQ(postfix);
    if (is_number(token)) {
      push(&stack, token);
    } else {
      int b = toInt(pop(&stack));
      int a = toInt(pop(&stack));
      switch (token[0]) {
        case '+': push(&stack, intToStr(a + b)); break;
        case '-': push(&stack, intToStr(a - b)); break;
        case '*': push(&stack, intToStr(a * b)); break;
        case '/': 
          if (b == 0) return 0; // –û—à–∏–±–∫–∞ –¥–µ–ª–µ–Ω–∏—è –Ω–∞ –Ω–æ–ª—å
          push(&stack, intToStr(a / b)); 
          break;
      }
    }
  }
  return toInt(pop(&stack));
}

###  –ü–∞—Ä—Å–∏–Ω–≥ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã—Ö —á–∏—Å–µ–ª

```C

// –ü—Ä–∏–º–µ—Ä –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ç–æ–∫–µ–Ω–∞ "-123"
if (input[i] == '-' && (i == 0 || input[i-1] == '(' || is_operator(input[i-1]))) {
  start = i;
  while (is_digit(input[++i])) {}
  char* token = –≤—ã–¥–µ–ª–∏—Ç—å_–ø–æ–¥—Å—Ç—Ä–æ–∫—É(input, start, i);
  –¥–æ–±–∞–≤–∏—Ç—å_–≤_–æ—á–µ—Ä–µ–¥—å(token);
}

### üìñ –ü—Ä–∏–º–µ—Ä—ã

–ü—Ä–∏–º–µ—Ä 1: –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –æ–ø–µ—Ä–∞—Ü–∏–π

–í–≤–æ–¥: 5 + 3 * 2  
–ü–æ—Å—Ç—Ñ–∏–∫—Å–Ω–∞—è –∑–∞–ø–∏—Å—å: 5 3 2 * +  
–†–µ–∑—É–ª—å—Ç–∞—Ç: 11

–ü—Ä–∏–º–µ—Ä 2: –û—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ —á–∏—Å–ª–∞

–í–≤–æ–¥: -2 * (3 + 4)  
–ü–æ—Å—Ç—Ñ–∏–∫—Å–Ω–∞—è –∑–∞–ø–∏—Å—å: -2 3 4 + *  
–†–µ–∑—É–ª—å—Ç–∞—Ç: -14

–ü—Ä–∏–º–µ—Ä 3: –û—à–∏–±–∫–∞ –¥–µ–ª–µ–Ω–∏—è –Ω–∞ –Ω–æ–ª—å

–í–≤–æ–¥: 10 / (5 - 5)  
–û—à–∏–±–∫–∞: –î–µ–ª–µ–Ω–∏–µ –Ω–∞ –Ω–æ–ª—å  
–†–µ–∑—É–ª—å—Ç–∞—Ç: 0



### ‚ö†Ô∏è –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
1. **–¢–æ–ª—å–∫–æ —Ü–µ–ª—ã–µ —á–∏—Å–ª–∞**: `5 / 2 = 2` (–¥—Ä–æ–±–Ω–∞—è —á–∞—Å—Ç—å –æ—Ç–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è).
2. **–ù–µ—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –≤–≤–æ–¥–∞**: `2 + + 3` ‚Üí –Ω–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ.
3. **–ü–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–µ —Ü–µ–ª—ã—Ö —á–∏—Å–µ–ª**: `999999999 * 999999999` ‚Üí —Ä–µ–∑—É–ª—å—Ç–∞—Ç –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω.
